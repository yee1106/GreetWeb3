(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{5266:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/setting",function(){return n(64733)}])},64733:function(e,r,n){"use strict";n.r(r);var t=n(34051),i=n.n(t),o=n(85893),s=n(41664),a=n(3857),l=n(88852),c=n(53341),u=n(13131),d=n(50112),f=n(57558),p=n(41181),v=n(98233),h=n(98260),m=n(80471),g=n(83078),x=n(76655),j=n(22167),w=n(47516),y=n(67294),b=n(74922),_=n(11163);function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function S(e,r,n,t,i,o,s){try{var a=e[o](s),l=a.value}catch(c){return void n(c)}a.done?r(l):Promise.resolve(l).then(t,i)}function A(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var o=e.apply(r,n);function s(e){S(o,t,i,s,a,"next",e)}function a(e){S(o,t,i,s,a,"throw",e)}s(void 0)}))}}function C(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return k(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=function(e){return new Promise((function(r,n){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return r(t.result)},t.onerror=function(e){return n(e)}}))};r.default=function(){var e,r,n,t,k=(0,a.rZ)(),S=((0,_.useRouter)(),(0,g.Nr)()),Z=S.Moralis,z=S.user,N=(S.setUserData,S.isUserUpdating,S.isInitialized),D=(S.refetchUserData,(0,y.useState)({image:"",file:void 0})),E=D[0],O=D[1],P=(0,y.useState)(!1),F=P[0],I=P[1],M=(0,y.useState)(""),R=M[0],T=M[1],q=(0,g.Oc)("NewUser",(function(e){return e.equalTo("userAddress",null===z||void 0===z?void 0:z.get("ethAddress")).limit(1)}),[null===z||void 0===z?void 0:z.get("ethAddress")],{live:!0}),L=q.data;q.error,q.isLoading,q.isFetching,q.fetch;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.default,{href:"/",passHref:!0,children:(0,o.jsx)(l.z,{variant:"outline",children:"Back"})}),(0,o.jsxs)(c.Z,{p:"lg",style:{backgroundColor:k.colors.dark[9],border:"1px solid",borderColor:k.colors.gray[7]},radius:"lg",mt:"sm",children:[(0,o.jsx)(u.Z,{position:"apart",align:"center",mb:"sm",children:(0,o.jsx)(d.x,{size:"lg",weight:"bold",align:"center",children:"Setting"})}),(0,o.jsx)(u.Z,{position:"center",align:"flex-start",children:(0,o.jsxs)(u.Z,{position:"center",direction:"column",children:[(0,o.jsx)(f.q,{radius:"lg",color:"dark",mb:"sm",src:E.image||(null===(r=null===(e=L[0])||void 0===e?void 0:e.get("profile_pic"))||void 0===r?void 0:r.url()),size:80,children:(0,o.jsx)(m.Mdg,{size:"100%"})}),(0,o.jsx)(p.D,{order:5,children:null===(n=L[0])||void 0===n?void 0:n.get("userName")}),(0,o.jsx)(d.x,{size:"sm",children:(null===(t=L[0])||void 0===t?void 0:t.get("description"))||"Default description"})]})}),(0,o.jsx)(u.Z,{position:"center",mt:"sm",children:(0,o.jsx)(v.o,{placeholder:"",label:"Set Description",required:!0,onChange:function(e){return T(e.target.value)},disabled:F})}),(0,o.jsx)(u.Z,{position:"center",mt:"sm",children:(0,o.jsx)(x.f,{onDrop:function(){var e=A(i().mark((function e(r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(r[0]);case 2:n=e.sent,O({image:n,file:r[0]});case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onReject:function(e){return console.log("rejected files",e)},accept:C(j.d1),style:{height:"80px",display:"flex",justifyContent:"center"},children:function(e){return(0,o.jsxs)(h.M,{children:[(0,o.jsx)(w.Zw4,{size:"80%"}),"Upload the new profile picture"]})}})}),(0,o.jsx)(u.Z,{position:"center",mt:"sm",children:(0,o.jsx)(l.z,{variant:"outline",loading:F,onClick:A(i().mark((function e(){var r,n,t,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=15;break}return I(!0),null===(r=L[0])||void 0===r||r.set("description",R),e.next=6,null===(n=L[0])||void 0===n?void 0:n.save();case 6:if(void 0===E.file){e.next=12;break}return s=new Z.File(E.file.name,E.file),null===(t=L[0])||void 0===t||t.set("profile_pic",s),e.next=12,null===(o=L[0])||void 0===o?void 0:o.save();case 12:(0,b.c0)({title:"Success",message:"User data updated",autoClose:2500,disallowClose:!0,color:"green"}),O({image:"",file:void 0}),I(!1);case 15:case"end":return e.stop()}}),e)}))),children:"Save"})})]})]})}}},function(e){e.O(0,[2,774,888,179],(function(){return r=5266,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
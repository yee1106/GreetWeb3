(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{41181:function(e,t,n){"use strict";n.d(t,{D:function(){return b}});var r=n(67294),i=n(3857),o=n(58067),s=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&f(e,n,t[n]);if(d)for(var n of d(t))u.call(t,n)&&f(e,n,t[n]);return e},m=(0,o.k)(((e,{element:t,align:n})=>{return{root:(r=h({},e.fn.fontStyles()),i={fontFamily:e.headings.fontFamily,fontWeight:e.headings.fontWeight,fontSize:e.headings.sizes[t].fontSize,lineHeight:e.headings.sizes[t].lineHeight,margin:0,color:"inherit",textAlign:n},l(r,a(i)))};var r,i})),g=n(10745),x=Object.defineProperty,p=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const w={order:1},b=(0,r.forwardRef)(((e,t)=>{const n=(0,i.Z3)("Title",w,e),{className:o,order:s,children:l,align:a}=n,d=((e,t)=>{var n={};for(var r in e)v.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&p)for(var r of p(e))t.indexOf(r)<0&&j.call(e,r)&&(n[r]=e[r]);return n})(n,["className","order","children","align"]),{classes:c,cx:u}=m({element:`h${s}`,align:a},{name:"Title"});return[1,2,3,4,5,6].includes(s)?r.createElement(g.x,((e,t)=>{for(var n in t||(t={}))v.call(t,n)&&y(e,n,t[n]);if(p)for(var n of p(t))j.call(t,n)&&y(e,n,t[n]);return e})({component:`h${s}`,ref:t,className:u(c.root,o)},d),l):null}));b.displayName="@mantine/core/Title"},58932:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[id]",function(){return n(79627)}])},5482:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(85893),i=n(67294),o=n(3857),s=n(99755),l=n(13131),a=n(50112),d=n(10745),c=n(53341),u=n(57558),f=n(468),h=n(85102),m=n(14257),g=n(29355),x=n(80471),p=n(5434),v=n(89583),j=n(8193),y=n(66982),w=n.n(y),b=n(30381),S=n.n(b),k=n(83078),z=n(41664),C="https://mumbai.polygonscan.com/address/0x254db072a0981919ab7f86351528324b3c954e40#readContract",N=function(e){var t,n,y,b=(0,o.rZ)(),N=(0,g.n)().width,O=(0,i.useState)(!1),T=O[0],A=O[1],P=(0,i.useState)(!1),Z=P[0],E=P[1],q=(0,i.useState)(!1),H=q[0],F=q[1],_=(0,k.Oc)("NewUser",(function(t){return t.equalTo("userName",e.userName).limit(1)})),$=_.data,L=(_.isLoading,(0,k.Oc)("_User",(function(e){var t;return e.equalTo("ethAddress",null===(t=$[0])||void 0===t?void 0:t.get("userAddress")).limit(1)}),[$])),I=null===(t=e.images)||void 0===t?void 0:t.map((function(e){return{original:e}})),B=function(e){return(0,r.jsx)(s.k,{onClick:e.onClick,sx:{":hover":{color:b.white}},children:(0,r.jsxs)(l.Z,{align:"center",children:[e.icon,(0,r.jsx)(a.x,{size:"sm",children:e.count})]})})};return(0,i.useEffect)((function(){N<900?(A(!0),F(!1)):(A(!1),E(!1))}),[N]),(0,r.jsxs)(l.Z,{position:"center",children:[(0,r.jsx)(d.x,{my:"md",style:{width:N<=b.breakpoints.sm?"100%":"70%"},children:(0,r.jsxs)(c.Z,{p:"lg",style:{backgroundColor:b.colors.dark[9],border:"1px solid",borderColor:b.colors.gray[7]},children:[(0,r.jsxs)(l.Z,{position:"apart",children:[(0,r.jsx)(z.default,{href:"/profile/".concat(null===(n=$[0])||void 0===n?void 0:n.get("uid")),passHref:!0,children:(0,r.jsxs)(l.Z,{style:{cursor:"pointer"},children:[(0,r.jsx)(u.q,{radius:"lg",color:"dark",src:null===(y=L.data[0])||void 0===y?void 0:y.get("profilePic").url(),children:(0,r.jsx)(x.Mdg,{size:40})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.x,{weight:500,children:e.userName}),(0,r.jsx)(a.x,{size:"sm",style:{color:b.colors.gray[6],lineHeight:1.5},children:S()(1e3*parseInt(e.timestamp)).format("Do MMMM YYYY")}),(0,r.jsx)(a.x,{size:"sm",style:{color:b.colors.gray[6],lineHeight:1.5},children:S()(1e3*parseInt(e.timestamp)).format("h:mm:ss a")})]})]})}),(0,r.jsxs)(l.Z,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)(a.x,{size:"xs",style:{color:b.colors.gray[6],lineHeight:1.5},children:["GreetID: ",e.id]})}),(0,r.jsxs)(f.v,{position:"left",size:"xl",mr:"sm",onClick:function(){!0===T&&(E(!0),F(!1))},opened:H,onOpen:function(){return F(!0)},onClose:function(){return F(!1)},children:[(0,r.jsx)(f.v.Label,{children:"Greet menu"}),(0,r.jsx)("a",{href:C,target:"_blank",rel:"noreferrer",children:(0,r.jsx)(f.v.Item,{icon:(0,r.jsx)(j.KP3,{size:20}),children:"Verify this Greet"})})]})]})]}),(0,r.jsx)(d.x,{my:"sm",children:(0,r.jsx)(h.o,{maxHeight:120,hideLabel:"Hide",showLabel:"Show more",children:(0,r.jsx)(a.x,{color:"white",size:"sm",style:{whiteSpace:"pre-line"},children:e.textContent})})}),(0,r.jsx)(c.Z.Section,{children:I&&(0,r.jsx)(w(),{items:I||[],showThumbnails:!1,showBullets:!!I&&I.length>1,showPlayButton:!1,showFullscreenButton:!1,showNav:N>b.breakpoints.sm,renderLeftNav:function(e,t){return(0,r.jsx)(s.k,{type:"button",className:"image-gallery-icon image-gallery-left-nav",disabled:t,onClick:e,"aria-label":"Previous Slide",sx:{height:"100%"},children:(0,r.jsx)(j.CF5,{size:20})})},renderRightNav:function(e,t){return(0,r.jsx)(s.k,{type:"button",className:"image-gallery-icon image-gallery-right-nav",disabled:t,onClick:e,"aria-label":"Next Slide",sx:{height:"100%"},children:(0,r.jsx)(j.Td4,{size:20})})}})}),(0,r.jsx)(d.x,{children:(0,r.jsx)(l.Z,{position:"center",children:(0,r.jsxs)(l.Z,{position:"apart",mx:"xs",px:"lg",mt:"lg",style:{width:"100%"},children:[(0,r.jsx)(B,{icon:(0,r.jsx)(p.tVv,{size:20,className:"feedButton"}),count:0}),(0,r.jsx)(B,{icon:(0,r.jsx)(v.DCG,{size:20,className:"feedButton"}),count:0}),(0,r.jsxs)(l.Z,{align:"center",children:[(0,r.jsx)(v.dSq,{size:20,className:"feedButton"}),(0,r.jsx)(a.x,{size:"sm",children:"0"})]})]})})})]})}),(0,r.jsx)(m.d,{opened:Z,onClose:function(){return E(!1)},position:"bottom",size:"md",title:"Greet Menu",children:(0,r.jsx)(l.Z,{position:"center",style:{width:"100%"},children:(0,r.jsx)("a",{href:C,target:"_blank",rel:"noreferrer",children:(0,r.jsx)(s.k,{sx:{width:"100%","&:hover":{backgroundColor:b.colors.dark[5]}},p:"md",children:(0,r.jsxs)(l.Z,{position:"left",children:[(0,r.jsx)(j.KP3,{}),(0,r.jsx)(a.x,{size:"sm",children:"Verify this Greet"})]})})})})})]})},O=function(e){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.x,{children:e.feeds.map((function(e){return(0,r.jsx)(N,{userName:e.userName,id:e.id,timestamp:e.timestamp,textContent:e.textContent,images:e.images,video:e.video},e.id)}))})})}},79627:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(34051),i=n.n(r),o=n(85893),s=n(79032),l=n(67294),a=n(41664),d=n(88852),c=n(41181),u=n(11163),f=n(3857),h=n(53341),m=n(13131),g=n(50112),x=n(6076),p=n(57558),v=n(10745),j=n(8193),y=n(80471),w=n(9669),b=n.n(w),S=function(e){var t=(0,f.rZ)(),n=(0,l.useState)(!1),r=n[0],i=n[1],s=(0,l.useState)(0),u=s[0],w=s[1],S=(0,l.useState)(0),k=S[0],z=S[1];(0,l.useEffect)((function(){C(),N(),O()}),[e.to]);var C=function(){b().post("https://api.stg.cybertino.io/connect/",JSON.stringify({query:"\n\t\t\t\tquery ProofQuery($from: String!, $to: String!) {\n\t\t\t\t\tconnections(fromAddr: $from, toAddrList: [$to], network: ETH) {\n\t\t\t\t\t\tnamespace\n\t\t\t\t\t\tproof\n\t\t\t\t\t\tfollowStatus {\n\t\t\t\t\t\t\tisFollowed\n\t\t\t\t\t\t\tisFollowing\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t",variables:{from:e.from,to:e.to}}),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).then((function(e){var t;i(null===(t=e.data.connections[0])||void 0===t?void 0:t.followStatus.isFollowing)})).catch()},N=function(){b().post("https://api.stg.cybertino.io/connect/",JSON.stringify({query:"\n\t\t\t\t\tquery IdentityQuery($address :String!){\n\t\t\t\t\t\tidentity(address: $address, network: ETH) {\n\t\t\t\t\t\t\tfollowingCount\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t",variables:{address:e.to}}),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).then((function(e){var t,n;w(null===(t=e.data.identity)||void 0===t?void 0:t.followingCount),console.log(null===(n=e.data.identity)||void 0===n?void 0:n.followingCount)})).catch()},O=function(){b().post("https://api.stg.cybertino.io/connect/",JSON.stringify({query:"\n\t\t\t\t\tquery IdentityQuery($address :String!){\n\t\t\t\t\t\tidentity(address: $address, network: ETH) {\n\t\t\t\t\t\t\tfollowerCount\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t",variables:{address:e.to}}),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).then((function(e){var t,n;z(null===(t=e.data.identity)||void 0===t?void 0:t.followerCount),console.log(null===(n=e.data.identity)||void 0===n?void 0:n.followerCount)})).catch()};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(h.Z,{p:"lg",style:{backgroundColor:t.colors.dark[9],border:"1px solid",borderColor:t.colors.gray[7]},radius:"lg",mt:"sm",children:[(0,o.jsxs)(m.Z,{position:"apart",align:"center",mb:"sm",children:[(0,o.jsx)(g.x,{size:"lg",weight:"bold",align:"center",children:"Profile"}),e.self&&(0,o.jsx)(a.default,{href:"/profile/setting",passHref:!0,children:(0,o.jsx)(x.A,{mr:"sm",size:"xl",children:(0,o.jsx)(j.zPD,{size:30})})})]}),(0,o.jsx)(m.Z,{position:"center",align:"flex-start",children:(0,o.jsxs)(m.Z,{direction:"column",position:"center",align:"center",children:[(0,o.jsx)(p.q,{radius:"lg",color:"dark",mb:"sm",size:80,src:e.image,children:(0,o.jsx)(y.Mdg,{size:"100%"})}),(0,o.jsx)(c.D,{order:5,children:e.userName}),e.description&&(0,o.jsx)(g.x,{size:"sm",children:e.description}),!e.self&&!r&&(0,o.jsx)(d.z,{variant:"outline",onClick:e.followButtonHandle,children:"Follow"}),!e.self&&r&&(0,o.jsx)(d.z,{variant:"outline",onClick:e.followButtonHandle,children:"Followed"})]})}),(0,o.jsxs)(m.Z,{position:"center",mt:"md",children:[(0,o.jsxs)(v.x,{children:[(0,o.jsx)(g.x,{size:"sm",weight:"bold",align:"center",children:e.greetCount}),(0,o.jsx)(g.x,{size:"sm",align:"center",children:"Greets"})]}),(0,o.jsx)(a.default,{href:"/profile/followers/".concat(e.id),passHref:!0,children:(0,o.jsxs)(v.x,{style:{cursor:"pointer"},children:[(0,o.jsx)(g.x,{size:"sm",weight:"bold",align:"center",children:k}),(0,o.jsx)(g.x,{size:"sm",align:"center",children:"Followers"})]})}),(0,o.jsx)(a.default,{href:"/profile/following/".concat(e.id),passHref:!0,children:(0,o.jsxs)(v.x,{style:{cursor:"pointer"},children:[(0,o.jsx)(g.x,{size:"sm",weight:"bold",align:"center",children:u}),(0,o.jsx)(g.x,{size:"sm",align:"center",children:"Following"})]})}),(0,o.jsxs)(v.x,{children:[(0,o.jsx)(g.x,{size:"sm",weight:"bold",align:"center",children:e.likeCount}),(0,o.jsx)(g.x,{size:"sm",align:"center",children:"Like"})]})]})]})})},k=n(83078),z=n(5482),C=n(83025),N=n(56060),O=n(49680);function T(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(d){return void n(d)}l.done?t(a):Promise.resolve(a).then(r,i)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){T(o,r,i,s,l,"next",e)}function l(e){T(o,r,i,s,l,"throw",e)}s(void 0)}))}}var P=function(){var e,t=(0,u.useRouter)().query.id,n=(0,l.useState)(0),r=n[0],f=n[1],h=(0,k.Nr)(),m=h.Moralis,g=h.isInitialized,x=(h.isInitializing,h.user),p=(h.isAuthenticating,(0,l.useState)("")),v=(p[0],p[1],(0,l.useState)("")),j=v[0],y=v[1],w=(0,l.useState)(!1),T=(w[0],w[1],(0,l.useState)(!1)),P=T[0],Z=T[1],E=(0,l.useState)(),q=E[0],H=E[1],F=(0,l.useState)(void 0),_=F[0],$=F[1],L=(0,l.useState)(!1),I=(L[0],L[1]),B=(0,l.useState)(),D=B[0],G=B[1],M=(0,l.useState)(""),Q=(M[0],M[1],(0,k.Ab)().account),R=(0,k.Oc)("NewGreet",(function(e){return e.equalTo("creator",null===_||void 0===_?void 0:_.get("userAddress")).notEqualTo("uri","").descending("timestamp_decimal").limit(10)}),[null===_||void 0===_?void 0:_.get("userAddress")]),U=R.data,J=R.isLoading,Y=(0,k.Oc)("_User",(function(e){return e.equalTo("ethAddress",null===_||void 0===_?void 0:_.get("userAddress")).limit(1)}),[null===_||void 0===_?void 0:_.get("userAddress")]);(0,l.useEffect)((function(){(null===_||void 0===_?void 0:_.get("userAddress"))&&b().post("https://api.stg.cybertino.io/connect/",JSON.stringify({query:"\n\t\t\t\tquery ProofQuery($from: String!, $to: String!) {\n\t\t\t\t\tconnections(fromAddr: $from, toAddrList: [$to], network: ETH) {\n\t\t\t\t\t\tproof\n\t\t\t\t\t\tfollowStatus {\n\t\t\t\t\t\t\tisFollowed\n\t\t\t\t\t\t\tisFollowing\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t",variables:{from:(null===x||void 0===x?void 0:x.get("ethAddress"))||Q,to:null===_||void 0===_?void 0:_.get("userAddress")}}),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).then((function(e){var t;G(e),I(null===(t=e[0])||void 0===t?void 0:t.followStatus.isFollowing)}))}),[Q,x,_]);var V=(0,N.i)();(0,l.useEffect)((function(){console.log(D)}),[D]);var W=(0,l.useCallback)(A(i().mark((function e(){var n,r,o,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=14;break}return n=new m.Query("NewUser"),e.next=4,n.equalTo("uid",t).first();case 4:return r=e.sent,y(null===r||void 0===r?void 0:r.get("userName")),$(r),o=new m.Query("NewGreet"),e.next=10,o.equalTo("creator",null===r||void 0===r?void 0:r.get("userAddress")).notEqualTo("uri","").count();case 10:s=e.sent,f(s),l=(null===x||void 0===x?void 0:x.get("ethAddress"))===(null===r||void 0===r?void 0:r.get("userAddress")),Z(l);case 14:case"end":return e.stop()}}),e)}))),[g,m.Query,t,x]);(0,l.useEffect)((function(){W()}),[x,W]);var K=(0,l.useCallback)(A(i().mark((function e(){var t,n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(U.map((function(e){return b().get(e.get("uri"))})));case 2:t=e.sent,n=U.map((function(e){return e.get("uid")})),r=U.map((function(e){return e.get("timestamp")})),o=t.map((function(e,t){var i,o=e.data;return{userName:o.creatorName,id:n[t],images:null===(i=o.images)||void 0===i?void 0:i.map((function(e){return e.URI})),textContent:o.text,timestamp:r[t]}})),H(o);case 7:case"end":return e.stop()}}),e)}))),[U]);return(0,l.useEffect)((function(){console.log(U),K()}),[U,K]),(0,o.jsxs)(s.Z,{title:"Test",homePage:!0,children:[(0,o.jsx)(a.default,{href:"/",passHref:!0,children:(0,o.jsx)(d.z,{variant:"outline",children:"Back"})}),void 0!==D&&(null===_||void 0===_?void 0:_.get("userAddress"))&&(null===x||void 0===x?void 0:x.get("ethAddress"))&&(0,o.jsx)(S,{userName:j,image:null===(e=Y.data[0])||void 0===e?void 0:e.get("profilePic").url(),greetCount:r,description:"",likeCount:0,self:P,id:t,from:null===x||void 0===x?void 0:x.get("ethAddress"),to:_.get("userAddress"),followButtonHandle:A(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===V||void 0===V?void 0:V.connect(null===_||void 0===_?void 0:_.get("userAddress"),O.ConnectionType.FOLLOW);case 2:case"end":return e.stop()}}),e)}))),unfollowButtonHandle:A(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===V||void 0===V?void 0:V.disconnect(null===_||void 0===_?void 0:_.get("userAddress"));case 2:case"end":return e.stop()}}),e)})))}),U.length>0&&(0,o.jsxs)(c.D,{order:4,mt:"sm",ml:"sm",children:["All Greets from ",j]}),!J&&(0,o.jsx)(z.Z,{feeds:q||[],filter:C.D.Trending,isFollowing:!0})]})}},83025:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var r={Trending:"TRENDING",Latest:"Latest"}}},function(e){e.O(0,[228,955,629,874,461,617,445,885,231,404,900,774,888,179],(function(){return t=58932,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{41152:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/following",function(){return t(10110)}])},10110:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var r=t(85893),i=t(11163),u=t(34051),s=t.n(u),o=t(11996),a=t(50112),c=t(98233),l=t(91142),f=t(13131),d=t(88852),h=t(67294),v=t(83078),g=t(40326),p=t(48444);function w(e,n,t,r,i,u,s){try{var o=e[u](s),a=o.value}catch(c){return void t(c)}o.done?n(a):Promise.resolve(a).then(r,i)}var x=function(e){e.open;var n=(0,i.useRouter)(),t=(0,h.useState)(""),u=t[0],x=t[1],m=(0,h.useState)(!1),b=m[0],_=m[1],j=(0,h.useState)(!1),k=j[0],S=j[1],y=(0,h.useState)(""),C=y[0],N=y[1],E=(0,h.useState)(!1),R=E[0],P=E[1],M=(0,v.Nr)(),U=M.Moralis,F=M.web3,L=U.web3Library,z=(0,v.Ab)().account,A=function(){var e,n=(e=s().mark((function e(){var n,t,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return/\s/.test(e)},_(!0),_(!0),!n(u)){e.next=10;break}return S(!0),N("User name can't contain whitespace"),e.abrupt("return");case 10:if(""!==u){e.next=14;break}return S(!0),N("User name can't be empty"),e.abrupt("return");case 14:return e.prev=14,t=new L.Contract(p.i.n,g.Mt,null===F||void 0===F?void 0:F.getSigner()),e.next=18,null===F||void 0===F?void 0:F.getGasPrice();case 18:return r=e.sent,i=L.utils.hexlify((null===r||void 0===r?void 0:r.mul(120).div(100))||0),e.next=22,t.registerNewUser(u,{gasLimit:L.utils.hexlify(5e5),gasPrice:i});case 22:return o=e.sent,e.next=25,o.wait();case 25:S(!1),_(!1),e.next=35;break;case 29:e.prev=29,e.t0=e.catch(14),_(!1),S(!0),N(e.t0.message),e.t0.data.message&&N(e.t0.data.message);case 35:case"end":return e.stop()}}),e,null,[[14,29]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var u=e.apply(n,t);function s(e){w(u,r,i,s,o,"next",e)}function o(e){w(u,r,i,s,o,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,h.useEffect)((function(){new L.Contract(p.i.n,g.Mt,null===F||void 0===F?void 0:F.getSigner()).isRegistered(z||"").then((function(e){!1===e&&P(!0)})).catch((function(e){console.log(e)}))}),[]),(0,r.jsx)(o.u,{opened:R,title:"Register",centered:!0,onClose:function(){return n.push("/")},children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.x,{size:"sm",children:"Register with the user name to proceed"}),(0,r.jsx)(c.o,{placeholder:"User name",label:"User name",required:!0,disabled:b,error:k&&C,onChange:function(e){return x(e.target.value)},onFocus:function(){return N("")}}),b&&(0,r.jsx)(l.a,{}),(0,r.jsx)(f.Z,{position:"right",children:(0,r.jsx)(d.z,{mt:"sm",onClick:A,loading:b,children:"Register"})})]})})},m=function(){(0,i.useRouter)();var e=(0,h.useState)(!1),n=e[0],t=e[1],u=(0,v.Nr)(),s=u.Moralis,o=u.web3,a=s.web3Library,c=(0,v.Ab)().account;(0,h.useEffect)((function(){new a.Contract(p.i.n,g.Mt,null===o||void 0===o?void 0:o.getSigner()).isRegistered(c||"").then((function(e){!1===e&&t(!0)})).catch((function(e){console.log(e)}))}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(x,{open:n})})}}},function(e){e.O(0,[774,888,179],(function(){return n=41152,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
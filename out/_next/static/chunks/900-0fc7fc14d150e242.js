(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{79032:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var s=n(34051),i=n.n(s),r=n(85893),a=n(67294),o=n(3857),l=n(16926),d=n(67558),c=n(60886),u=n(13168),p=n(13131),h=n(10745),x=n(50112),m=n(82123),f=n(11996),y=n(98233),g=n(91142),b=n(88852),j=n(98547),v=n(99755),w=n(6076),k=n(57558),z=n(74922),T=n(41664),M=n(80471),C=n(26089),N=n(29355),S=n(5434),A=n(11163),U=function(e){var t=e.color,n=e.icon,s=e.href,i=e.text,a=e.textColor;(0,A.useRouter)();return(0,r.jsx)(T.default,{href:s,passHref:!0,children:(0,r.jsx)(v.k,{sx:{width:"100%","&:hover":{backgroundColor:t}},p:"md",children:(0,r.jsxs)(p.Z,{position:"left",align:"center",children:[n,(0,r.jsx)(x.x,{size:"lg",style:{color:a},children:i})]})})})},F="/",_="/following",E="/explore",O=function(){var e=(0,o.rZ)(),t=(0,A.useRouter)(),n=function(n){return t.pathname===n?e.colors.indigo[7]:e.colors.dark[0]};return(0,r.jsxs)(p.Z,{position:"center",direction:"row",style:{width:"100%"},children:[(0,r.jsx)(U,{color:e.colors.dark[5],href:F,icon:(0,r.jsx)(C.SK8,{color:n(F)}),text:"Home",textColor:n(F)}),(0,r.jsx)(U,{color:e.colors.dark[5],href:_,icon:(0,r.jsx)(S.tVv,{size:20,color:n(_)}),text:"Following",textColor:n(_)}),(0,r.jsx)(U,{color:e.colors.dark[5],href:E,icon:(0,r.jsx)(C.QqS,{size:20,color:n(E)}),text:"Explore",textColor:n(E)})]})},I=n(92764),Z=function(e){var t=e.link,n=e.icon;return(0,r.jsx)(T.default,{href:t,passHref:!0,children:(0,r.jsx)(w.A,{children:n})})},G={home:"/",explore:"/explore",add:"/newGreet",notification:"/notifications",profile:"/profile"},P=function(e){var t=e.profileId,n=e.image;return(0,r.jsx)(c.z,{largerThan:"sm",styles:{display:"none"},children:(0,r.jsx)(I.$,{height:55,p:"md",style:{backgroundColor:"#000000"},children:(0,r.jsxs)(p.Z,{position:"apart",style:{width:"100%"},children:[(0,r.jsx)(Z,{link:G.home,icon:(0,r.jsx)(C.SK8,{size:"100%"})}),(0,r.jsx)(Z,{link:G.explore,icon:(0,r.jsx)(C.QqS,{size:"100%"})}),(0,r.jsx)(Z,{link:G.add,icon:(0,r.jsx)(C.v37,{size:"100%"})}),(0,r.jsx)(Z,{link:G.notification,icon:(0,r.jsx)(C.Uos,{size:"100%"})}),(0,r.jsx)(Z,{link:"".concat(G.profile,"/").concat(t),icon:(0,r.jsx)(k.q,{src:n,size:"sm",children:(0,r.jsx)(M.Mdg,{size:"100%"})})})]})})})},R=n(71217),B=n(83078),H=n(40326),q=n(48444),L=n(47516),W=n(56060);function K(e,t,n,s,i,r,a){try{var o=e[r](a),l=o.value}catch(d){return void n(d)}o.done?t(l):Promise.resolve(l).then(s,i)}var Y=(0,R.Pi)((function(e){e.title;var t,n=e.children,s=e.homePage,S=(0,o.rZ)(),U=(0,N.n)().width,F=(0,a.useState)(),_=(F[0],F[1],(0,A.useRouter)()),E=(0,B.Nr)(),I=E.Moralis,Z=E.isAuthenticated,G=E.authenticate,R=E.user,Y=E.logout,D=E.web3,J=E.isWeb3Enabled,Q=E.isWeb3EnableLoading,V=E.enableWeb3,$=I.web3Library,X=(0,a.useState)(""),ee=X[0],te=X[1],ne=(0,a.useState)(!1),se=ne[0],ie=ne[1],re=(0,a.useState)(!1),ae=re[0],oe=re[1],le=(0,a.useState)(""),de=le[0],ce=le[1],ue=(0,a.useState)(!1),pe=ue[0],he=ue[1],xe=(0,W.i)(),me=(0,B.Ab)(),fe=me.switchNetwork,ye=me.chainId,ge=me.chain,be=me.account,je=(0,B.Oc)("NewUser",(function(e){return e.equalTo("userAddress",null===R||void 0===R?void 0:R.get("ethAddress")).limit(1)}),[null===R||void 0===R?void 0:R.get("ethAddress")],{live:!0}),ve=je.data,we=(je.error,je.isLoading),ke=je.isFetching,ze=(je.fetch,function(){var e,n=(e=i().mark((function e(){var n,s,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return/\s/.test(e)},ie(!0),!n(ee)){e.next=9;break}return oe(!0),ce("User name can't contain whitespace"),e.abrupt("return");case 9:if(""!==ee){e.next=13;break}return oe(!0),ce("User name can't be empty"),e.abrupt("return");case 13:return e.prev=13,t=new $.Contract(q.i.n,H.Mt,null===D||void 0===D?void 0:D.getSigner()),e.next=17,null===D||void 0===D?void 0:D.getGasPrice();case 17:return s=e.sent,r=$.utils.hexlify((null===s||void 0===s?void 0:s.mul(120).div(100))||0),e.next=21,t.registerNewUser(ee,{gasLimit:$.utils.hexlify(5e5),gasPrice:r});case 21:return a=e.sent,e.next=24,a.wait();case 24:oe(!1),ie(!1),_.push("/"),e.next=35;break;case 29:e.prev=29,e.t0=e.catch(13),ie(!1),oe(!0),ce(e.t0.message),e.t0.data.message&&ce(e.t0.data.message);case 35:case"end":return e.stop()}}),e,null,[[13,29]])})),function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function a(e){K(r,s,i,a,o,"next",e)}function o(e){K(r,s,i,a,o,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}());(0,a.useEffect)((function(){console.log(xe)}),[xe]),(0,a.useEffect)((function(){var e;console.log(null===(e=ve[0])||void 0===e?void 0:e.get("uid"))}),[ve]),(0,a.useEffect)((function(){!Z||J||Q||V(),J&&ye!=I.Chains.POLYGON_MUMBAI&&((0,z.yK)("switch"),(0,z.c0)({id:"switch",title:"Error",message:"Please switch the network to Mumbai",autoClose:2500,disallowClose:!0,color:"red",icon:(0,r.jsx)(L.Cw1,{size:"100%"})}),fe(I.Chains.POLYGON_MUMBAI))}),[Z,J,ge,s,V,fe,Q,ye,I.Chains.POLYGON_MUMBAI]);var Te={navbar:{border:"none",background:S.black,height:"100%",display:s?"block":"none"},header:{},innerHeader:{borderBottom:"5px dashed",background:S.black,borderImage:"linear-gradient(to right, #364fc7 0%, #3b5bdb 25%, #1c7eed 75%, #15aabf 100% )",borderImageSlice:1,margin:0,height:"70px"},secondHeader:{backgroundColor:S.black,height:"50px"},mobileUpperNavbarNormal:{fontSize:""},footer:{}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.V,{styles:{main:{background:"dark"===S.colorScheme?S.black:S.colors.gray[0]}},navbarOffsetBreakpoint:"sm",asideOffsetBreakpoint:"sm",fixed:!0,navbar:U>=S.breakpoints.sm?(0,r.jsx)(d.w,{p:"md",hiddenBreakpoint:"sm",width:{sm:150,lg:300,md:150,xl:300,xxl:500},style:Te.navbar,mt:"lg",children:(0,r.jsx)(O,{})}):(0,r.jsx)(r.Fragment,{}),aside:(0,r.jsx)(c.z,{smallerThan:"sm",styles:{display:"none"},children:(0,r.jsx)(u.x,{p:"md",hiddenBreakpoint:"sm",width:{sm:150,lg:300,md:150,xl:300,xxl:500},style:{background:S.black,height:"100%"},mt:"lg",children:(0,r.jsx)(p.Z,{position:"center",style:{width:"100%",display:s?"block":"none"},children:(0,r.jsx)(h.x,{sx:{width:"100%"},p:"md",children:(0,r.jsx)(p.Z,{position:"center",children:(0,r.jsx)(x.x,{size:"sm",children:"Following suggestion"})})})})})}),header:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(m.h,{height:70,style:Te.header,children:[(0,r.jsx)(f.u,{opened:pe,title:"Register",onClose:function(){return he(!1)},children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.x,{size:"sm",children:"Register with the user name to proceed"}),(0,r.jsx)(y.o,{placeholder:"User name",label:"User name",required:!0,disabled:se,error:ae&&de,onChange:function(e){return te(e.target.value)},onFocus:function(){return ce("")}}),se&&(0,r.jsx)(g.a,{}),(0,r.jsx)(p.Z,{position:"right",children:(0,r.jsx)(b.z,{mt:"sm",onClick:ze,loading:se,children:"Register"})})]})}),(0,r.jsxs)(j.r,{justify:"space-between",style:Te.innerHeader,children:[(0,r.jsx)(h.x,{style:{display:"flex",alignItems:"center",height:"100%"},children:(0,r.jsx)(T.default,{href:"/",passHref:!0,children:(0,r.jsx)(v.k,{children:(0,r.jsx)(x.x,{weight:"bold",ml:"sm",style:{fontSize:"2rem"},children:"Greet"})})})}),(0,r.jsxs)(p.Z,{children:[U>=S.breakpoints.sm&&Z&&(0,r.jsx)(r.Fragment,{children:!ve[0]||we||ke?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p.Z,{style:{cursor:"pointer"},children:[(0,r.jsx)(k.q,{src:"",size:"md",children:(0,r.jsx)(M.Mdg,{size:"100%"})}),(0,r.jsxs)(h.x,{children:[(0,r.jsx)(x.x,{style:{width:"120px",overflow:"hidden",textOverflow:"ellipsis"},weight:"bolder",children:be}),ve[0]?ve[0].get("userName"):"Unnamed"]})]}),(0,r.jsx)(b.z,{color:"violet",size:"md",onClick:function(){return he(!0)},children:"Register"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.default,{href:"/newGreet",scroll:!1,passHref:!0,children:(0,r.jsx)(w.A,{size:"xl",children:(0,r.jsx)(C.v37,{size:"100%"})})}),(0,r.jsx)(w.A,{size:"xl",children:(0,r.jsx)(C.Uos,{size:"100%"})}),(0,r.jsx)(T.default,{href:"/profile/".concat(ve[0].get("uid")),passHref:!0,children:(0,r.jsxs)(p.Z,{style:{cursor:"pointer"},children:[(0,r.jsx)(k.q,{src:"",size:"md",children:(0,r.jsx)(M.Mdg,{size:"100%"})}),(0,r.jsxs)(h.x,{children:[(0,r.jsx)(x.x,{style:{width:"120px",overflow:"hidden",textOverflow:"ellipsis"},weight:"bolder",children:null===R||void 0===R?void 0:R.get("ethAddress")}),ve[0]?ve[0].get("userName"):"Unnamed"]})]})})]})}),Z?(0,r.jsxs)(r.Fragment,{children:[U<=S.breakpoints.sm&&!ve[0]&&(0,r.jsx)(b.z,{color:"violet",size:"md",onClick:function(){return he(!0)},children:"Register"}),(0,r.jsx)(b.z,{color:"indigo",size:"md",mr:"sm",onClick:function(){_.push("/"),Y()},children:(0,r.jsx)(x.x,{size:"md",children:"Disconnect"})})]}):(0,r.jsx)(b.z,{color:"indigo",size:"md",mr:"sm",onClick:function(){G({provider:"metamask",chainId:80001,signingMessage:"Welcome from Greet, Sign this message to connect to the app"})},children:(0,r.jsx)(x.x,{size:"md",children:"Connect"})})]})]})]})}),footer:ve[0]&&(0,r.jsx)(P,{profileId:ve[0].get("uid"),image:""}),children:n})})})),D=Y},56060:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var s=n(67294),i=n(49680),r=n.n(i),a=function(){var e=(0,s.useState)(),t=e[0],n=e[1];return(0,s.useEffect)((function(){if(window.ethereum){var e=new(r())({namespace:"CyberConnect",env:i.Env.STAGING,chain:i.Blockchain.ETH,provider:window.ethereum,signingMessageEntity:"Greet"});n(e)}}),[]),t}},35883:function(){},71456:function(){},89214:function(){},73105:function(){},55024:function(){},40326:function(e){"use strict";e.exports=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_trustedForwarder","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"userAddress","type":"address"},{"indexed":false,"internalType":"string","name":"userName","type":"string"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"userRegistered","type":"event"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getUserCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_userAddress","type":"address"}],"name":"getUserPublicDetailsByAddress","outputs":[{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"string","name":"_userName","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_userAddress","type":"address"}],"name":"isRegistered","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"forwarder","type":"address"}],"name":"isTrustedForwarder","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_userName","type":"string"}],"name":"registerNewUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_trustedForwarder","type":"address"}],"name":"setTrustedForwarder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"trustedForwarder","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"uniqueUserName","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"users","outputs":[{"internalType":"address","name":"userAddress","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"userName","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"versionRecipient","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"pure","type":"function"}]}')},48444:function(e){"use strict";e.exports=JSON.parse('{"i":{"n":"0x1423ed4ee7a3b955c00e3a8680e61323256b6e30","j":"0x254db072a0981919ab7f86351528324b3c954e40"}}')}}]);